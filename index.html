<script>
  // Chatbot intelligent (IA via backend Vercel)
  const chatbox = document.getElementById('chatbox');
  function addMsg(text, sender) {
    const div = document.createElement('div');
    div.className = 'msg ' + sender;
    div.textContent = text;
    chatbox.appendChild(div);
    chatbox.scrollTop = chatbox.scrollHeight;
  }
  async function botReply(msg) {
    addMsg("Attends la réponse de l'IA...", "bot");
    try {
      const response = await fetch("https://english-avator-u31q.vercel.app/api/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: msg })
      });
      const data = await response.json();
      return data.reply;
    } catch (e) {
      return "Erreur API : Impossible d’obtenir la réponse IA.";
    }
  }
  document.getElementById('chatform').onsubmit = async function(e) {
    e.preventDefault();
    const usermsg = document.getElementById('userinput').value;
    addMsg(usermsg, 'user');
    const reply = await botReply(usermsg);
    addMsg(reply, 'bot');
    document.getElementById('userinput').value = '';
  };
  // Message d’accueil
  addMsg("Bienvenue ! Je suis ton avatar intelligent. Pose-moi une question !", 'bot');
</script>